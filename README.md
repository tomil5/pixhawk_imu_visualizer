# Pixhawk IMU Reader

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö IMU (–∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä, –≥–∏—Ä–æ—Å–∫–æ–ø, –º–∞–≥–Ω–∏—Ç–æ–º–µ—Ç—Ä) —Å –∞–≤—Ç–æ–ø–∏–ª–æ—Ç–∞ Pixhawk —á–µ—Ä–µ–∑ MAVLink –ø—Ä–æ—Ç–æ–∫–æ–ª –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Ö –≤ CSV —Ñ–∞–π–ª.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ C++ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –∞–≤—Ç–æ–ø–∏–ª–æ—Ç—É Pixhawk —á–µ—Ä–µ–∑ USB –ø–æ—Ä—Ç, –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å –¥–∞—Ç—á–∏–∫–æ–≤ IMU –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∏—Ö –≤ CSV —Ñ–∞–π–ª –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.

**–ü–æ–ª—É—á–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –ê–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä (X, Y, Z) - —É—Å–∫–æ—Ä–µ–Ω–∏—è –≤ milli-G
- –ì–∏—Ä–æ—Å–∫–æ–ø (X, Y, Z) - —É–≥–ª–æ–≤—ã–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤ milli-rad/s
- –ú–∞–≥–Ω–∏—Ç–æ–º–µ—Ç—Ä (X, Y, Z) - –º–∞–≥–Ω–∏—Ç–Ω–æ–µ –ø–æ–ª–µ –≤ milli-Gauss

## üñ•Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **–û–°:** Linux Mint, Ubuntu 20.04+ –∏–ª–∏ –¥—Ä—É–≥–∏–µ Debian-based –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤—ã
- **–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä:** GCC/G++ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π C++11
- **CMake:** –≤–µ—Ä—Å–∏—è 3.10 –∏–ª–∏ –≤—ã—à–µ
- **–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ:** Pixhawk –∞–≤—Ç–æ–ø–∏–ª–æ—Ç —Å USB –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### Linux Mint / Ubuntu
```bash
# –û–±–Ω–æ–≤–ª—è–µ–º —Å–∏—Å—Ç–µ–º—É
sudo apt update
sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã
sudo apt install -y build-essential cmake git

# –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É dialout –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ USB –ø–æ—Ä—Ç–∞–º
sudo usermod -a -G dialout $USER

# –í–ê–ñ–ù–û: –ü–µ—Ä–µ–ª–æ–≥–∏–Ω—å—Ç–µ—Å—å –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –∫–æ–º–ø—å—é—Ç–µ—Ä –ø–æ—Å–ª–µ —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã!
sudo reboot
```

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —Å–±–æ—Ä–∫–∞
```bash
# 1. –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/tomil5/pixhawk_imu_visualizer.git
cd pixhawk_imu_visualizer

# 2. –°–∫–∞—á–∏–≤–∞–µ–º MAVLink –±–∏–±–ª–∏–æ—Ç–µ–∫—É (C –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã)
git clone https://github.com/mavlink/c_library_v2.git

# 3. –°–æ–∑–¥–∞—ë–º –ø–∞–ø–∫—É –¥–ª—è —Å–±–æ—Ä–∫–∏
mkdir build
cd build

# 4. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º Makefile —Å –ø–æ–º–æ—â—å—é CMake
cmake ..

# 5. –ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º –ø—Ä–æ–µ–∫—Ç
make
```

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –≤ –ø–∞–ø–∫–µ `build/` –ø–æ—è–≤–∏—Ç—Å—è –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª `pixhawk_imu_reader`.

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫

### 1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ Pixhawk –∫ –∫–æ–º–ø—å—é—Ç–µ—Ä—É —á–µ—Ä–µ–∑ USB

### 2. –ù–∞–π–¥–∏—Ç–µ –ø–æ—Ä—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞–∫–æ–π –ø–æ—Ä—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
ls -l /dev/ttyACM*

# –û–±—ã—á–Ω–æ —ç—Ç–æ /dev/ttyACM0
# –í—ã–≤–æ–¥: crw-rw---- 1 root dialout 166, 0 ... /dev/ttyACM0
```

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç –≤ –∫–æ–¥–µ (–µ—Å–ª–∏ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è)

–ï—Å–ª–∏ —É –≤–∞—Å –ø–æ—Ä—Ç –Ω–µ `/dev/ttyACM0`, –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `src/imu_reader.cpp`:
```cpp
const char* PIXHAWK_PORT = "/dev/ttyACM0";  // –ò–∑–º–µ–Ω–∏—Ç–µ –∑–¥–µ—Å—å
```

–ó–∞—Ç–µ–º –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ:
```bash
cd build
make
```

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É
```bash
cd build
./pixhawk_imu_reader
```

### –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥
```
Connecting to Pixhawk...
Connected to /dev/ttyACM0
Listening for RAW_IMU messages...
[10] ACC: X=   -45 Y=   123 Z=  9810 | GYRO: X=    12 Y=   -34 Z=     5 | MAG: X=   234 Y=  -156 Z=   890
[20] ACC: X=   -42 Y=   125 Z=  9808 | GYRO: X=    10 Y=   -32 Z=     3 | MAG: X=   235 Y=  -154 Z=   892
...
```

### 5. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã

–ù–∞–∂–º–∏—Ç–µ **Ctrl+C** –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.
```
^C
Stopping...
Program terminated. Total messages: 1523
Data saved to imu_log.csv
```

## üìä –§–æ—Ä–º–∞—Ç CSV —Ñ–∞–π–ª–∞

–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª `imu_log.csv` –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ñ–æ—Ä–º–∞—Ç–µ:
```csv
timestamp,AX_raw,AY_raw,AZ_raw,GX_raw,GY_raw,GZ_raw,MX_raw,MY_raw,MZ_raw
1738872345.123456,-45,123,9810,12,-34,5,234,-156,890
1738872345.223789,-42,125,9808,10,-32,3,235,-154,892
...
```

**–ö–æ–ª–æ–Ω–∫–∏:**
- `timestamp` - Unix timestamp –≤ —Å–µ–∫—É–Ω–¥–∞—Ö —Å –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥–∞–º–∏
- `AX_raw, AY_raw, AZ_raw` - —É—Å–∫–æ—Ä–µ–Ω–∏—è –≤ milli-G (—Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ 1000 –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è G)
- `GX_raw, GY_raw, GZ_raw` - —É–≥–ª–æ–≤—ã–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤ milli-rad/s (—Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ 1000 –¥–ª—è —Ä–∞–¥/—Å)
- `MX_raw, MY_raw, MZ_raw` - –º–∞–≥–Ω–∏—Ç–Ω–æ–µ –ø–æ–ª–µ –≤ milli-Gauss (—Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ 1000 –¥–ª—è Gauss)

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

–í—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Ñ–∞–π–ª–µ `src/imu_reader.cpp`:
```cpp
const char* PIXHAWK_PORT = "/dev/ttyACM0";  // USB –ø–æ—Ä—Ç
const int BAUDRATE = B115200;                // –°–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö
const char* CSV_FILE = "imu_log.csv";        // –ò–º—è —Ñ–∞–π–ª–∞ –¥–ª—è –ª–æ–≥–æ–≤
bool LOG_TO_CSV = true;                      // –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:
```bash
cd build
make
```

## üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "Error opening port: /dev/ttyACM0"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Ç –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–æ—Ä—Ç—É.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—ã –≤ –≥—Ä—É–ø–ø–µ dialout
groups

# –ï—Å–ª–∏ –Ω–µ—Ç dialout –≤ —Å–ø–∏—Å–∫–µ:
sudo usermod -a -G dialout $USER
sudo reboot  # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ—Å—å!

# –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–Ω–æ–≤–∞
groups
```

### –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã–µ USB —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
ls -l /dev/ttyACM* /dev/ttyUSB*

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ª–æ–≥–∞—Ö
dmesg | grep tty

# –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π USB –ø–æ—Ä—Ç –∏–ª–∏ –∫–∞–±–µ–ª—å
```

### –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö / Timeout

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- Pixhawk –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω / –≤ —Ä–µ–∂–∏–º–µ bootloader
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π baudrate
- –ü—Ä–æ–±–ª–µ–º—ã —Å USB –∫–∞–±–µ–ª–µ–º

**–†–µ—à–µ–Ω–∏—è:**
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ Pixhawk
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π baudrate (57600):
```cpp
  const int BAUDRATE = B57600;
```
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ USB –∫–∞–±–µ–ª—å (–¥–æ–ª–∂–µ–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö)

### –û—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ MAVLink –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å–∫–∞—á–∞–Ω–∞
ls c_library_v2/

# –ï—Å–ª–∏ –ø–∞–ø–∫–∏ –Ω–µ—Ç:
git clone https://github.com/mavlink/c_library_v2.git

# –û—á–∏—Å—Ç–∏—Ç–µ build –∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ
cd build
rm -rf *
cmake ..
make
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
pixhawk_imu_visualizer/
‚îú‚îÄ‚îÄ build/                  # –ü–∞–ø–∫–∞ —Å–±–æ—Ä–∫–∏ (—Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏)
‚îÇ   ‚îî‚îÄ‚îÄ pixhawk_imu_reader # –ò—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ pixhawk_imu_reader.cpp     # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–æ–≥—Ä–∞–º–º—ã
‚îú‚îÄ‚îÄ c_library_v2/          # MAVLink –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ (–∫–ª–æ–Ω–∏—Ä—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ)
‚îú‚îÄ‚îÄ CMakeLists.txt         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CMake
‚îú‚îÄ‚îÄ .gitignore
‚îî‚îÄ‚îÄ README.md
```

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## üìß –ö–æ–Ω—Ç–∞–∫—Ç—ã

GitHub: [@tomil5](https://github.com/tomil5)